<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ğŸ“š Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø£Ø¯Ù„Ø©</title>
<link rel="stylesheet" href="/css/style.css">
<style>
/* ğŸŒ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª */
body {
    font-family: "Cairo", Arial, sans-serif;
    margin: 0;
    padding: 0;
    background: #f5f7fa;
    color: #2c3e50;
    text-align: center;
}
header {
    background: #3498db;
    color: white;
    padding: 15px;
}
h1 { margin: 0; font-size: 1.8em; }
.container { padding: 25px; max-width: 900px; margin: auto; }

/* ğŸ“‘ ÙƒÙ„ Ø³ÙŠØ§Ø³Ø© */
.policy-item {
    background: #fff;
    border-radius: 8px;
    padding: 15px;
    margin: 10px 0;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    align-items: flex-start;
}
.policy-title {
    font-weight: bold;
    margin-bottom: 10px;
    font-size: 1.05em;
}
.policy-buttons {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}
.policy-buttons button,
.policy-buttons a {
    padding: 8px 12px;
    border-radius: 6px;
    border: none;
    font-size: 0.95em;
    cursor: pointer;
    color: #fff;
    transition: 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    text-decoration: none;
}
.btn-view { background: #3498db; }
.btn-view:hover { background: #217dbb; }
.btn-download { background: #2ecc71; }
.btn-download:hover { background: #27ae60; }
.btn-print { background: #9b59b6; }
.btn-print:hover { background: #8e44ad; }

/* ğŸ“„ PDF Viewer */
#pdfViewer {
    width: 100%;
    height: 80vh;
    border: none;
    display: none;
    margin-top: 10px;
}
.pdf-toolbar {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 15px 0;
}
.pdf-toolbar button {
    background: #e67e22;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 6px;
    font-size: 0.95em;
    cursor: pointer;
}
.pdf-toolbar button:hover { background: #d35400; }
</style>
</head>
<body>
<header><h1>ğŸ“š Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ§Ù„Ø£Ø¯Ù„Ø©</h1></header>
<div class="container">
    <!-- âœ… Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¹Ø§Ù… -->
    <div class="pdf-toolbar">
        <button id="btnGlobalPrint">ğŸ–¨ Ø·Ø¨Ø§Ø¹Ø© Ù…Ø¨Ø§Ø´Ø±Ø©</button>
    </div>

    <!-- âœ… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª -->
    <div id="policiesContainer"></div>

    <!-- âœ… PDF Viewer -->
    <iframe id="pdfViewer"></iframe>
</div>

<script>
const studentPolicies = [
  { title: "ğŸ“˜ Ø§Ù„Ù„Ø§Ø¦Ø­Ø© Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ©", filename: "Behaviour_Policy.pdf" },
  { title: "ğŸ“— Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø¬Ø±Ø§Ø¦ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø­Ø¶ÙˆØ± ÙˆØºÙŠØ§Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø©", filename: "Attendance_Policy.pdf" },
  { title: "ğŸ“• Ø³ÙŠØ§Ø³Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…", filename: "Assessment_Policy.pdf" },
  { title: "ğŸ“™ Ø³ÙŠØ§Ø³Ø© Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªÙ†Ù…Ø±", filename: "Bullying_Prevention_Policy.pdf" },
  { title: "ğŸ“’ Ø³ÙŠØ§Ø³Ø© Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø·ÙÙ„", filename: "Child_Rights_Policy.pdf" },
  { title: "ğŸ““ Ù‚Ø§Ù†ÙˆÙ† ÙˆØ¯ÙŠÙ…Ø©", filename: "Behaviour_Policy1.pdf" },
  { title: "ğŸ“” Ø¯Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªÙ†Ù…Ø±", filename: "Bullying_Prevention_Policy.pdf" },
  { title: "ğŸ“˜ Ø¯Ù„ÙŠÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø®Ø¯Ø±Ø§Øª", filename: "Drug_Prevention_Guide.pdf" },
  { title: "ğŸ“— Ø¯Ù„ÙŠÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„ØµØ­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ©", filename: "Mental_Health_Guide.pdf" },
  { title: "ğŸ“• Ø¯Ù„ÙŠÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„Ø·ÙÙˆÙ„Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø©", filename: "Parentsâ€™_Guide_to_Early_Childhood.pdf" },
  { title: "ğŸ“™ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ", filename: "Digital_Safety_Policy.pdf" }
];

const staffPolicies = [
  { title: "ğŸ“˜ Ø§Ù„Ù…ÙŠØ«Ø§Ù‚ Ø§Ù„Ù…Ù‡Ù†ÙŠ ÙˆØ§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠ", filename: "Ethics_Charter_Policy.pdf" },
  { title: "ğŸ“— Ø§Ù„Ù„Ø§Ø¦Ø­Ø© Ø§Ù„Ø³Ù„ÙˆÙƒÙŠØ©", filename: "Behaviour_Policy.pdf" },
  { title: "ğŸ“• Ø§Ù„Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø§Ø¬Ø±Ø§Ø¦ÙŠ Ù„Ø¥Ø¯Ø§Ø±Ø© Ø­Ø¶ÙˆØ± ÙˆØºÙŠØ§Ø¨ Ø§Ù„Ø·Ù„Ø¨Ø©", filename: "Attendance_Policy.pdf" },
  { title: "ğŸ“™ Ø³ÙŠØ§Ø³Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ…", filename: "Assessment_Policy.pdf" },
  { title: "ğŸ“’ Ø³ÙŠØ§Ø³Ø© Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªÙ†Ù…Ø±", filename: "Bullying_Prevention_Policy.pdf" },
  { title: "ğŸ““ Ø³ÙŠØ§Ø³Ø© Ø­Ù‚ÙˆÙ‚ Ø§Ù„Ø·ÙÙ„", filename: "Child_Rights_Policy.pdf" },
  { title: "ğŸ“” Ù‚Ø§Ù†ÙˆÙ† ÙˆØ¯ÙŠÙ…Ø©", filename: "Behaviour_Policy1.pdf" },
  { title: "ğŸ“˜ Ø¯Ù„ÙŠÙ„ Ø§Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„ØªÙ†Ù…Ø±", filename: "Bullying_Prevention_Policy.pdf" },
  { title: "ğŸ“— Ø¯Ù„ÙŠÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„ÙˆÙ‚Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ù…Ø®Ø¯Ø±Ø§Øª", filename: "Drug_Prevention_Guide.pdf" },
  { title: "ğŸ“• Ø¯Ù„ÙŠÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„ØµØ­Ø© Ø§Ù„Ù†ÙØ³ÙŠØ©", filename: "Mental_Health_Guide.pdf" },
  { title: "ğŸ“™ Ø¯Ù„ÙŠÙ„ ÙˆÙ„ÙŠ Ø§Ù„Ø£Ù…Ø± Ù„Ù„Ø·ÙÙˆÙ„Ø© Ø§Ù„Ù…Ø¨ÙƒØ±Ø©", filename: "Parentsâ€™_Guide_to_Early_Childhood.pdf" },
  { title: "ğŸ“’ Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ", filename: "Digital_Safety_Policy.pdf" }
];

let currentPdfFile = null;

// âœ… ÙØªØ­ PDF Ù„Ù„Ø¹Ø±Ø¶
function openPdfPolicy(filename) {
    if (!filename) return alert("âŒ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…Ù„Ù");
    currentPdfFile = filename;

    const isMobile = /Mobi|Android/i.test(navigator.userAgent);
    const pdfViewer = document.getElementById("pdfViewer");

    if (isMobile) {
        window.open(`/pdfjs/web/viewer.html?file=${encodeURIComponent("/pdfs/" + filename)}`, "_blank");
    } else {
        pdfViewer.src = `/pdfjs/web/viewer.html?file=${encodeURIComponent("/pdfs/" + filename)}`;
        pdfViewer.style.display = "block";
        pdfViewer.scrollIntoView({ behavior: "smooth" });
    }
}

// âœ… Ø·Ø¨Ø§Ø¹Ø© Ù…Ø¨Ø§Ø´Ø±Ø©
function printPdfDirect() {
    if (!currentPdfFile) return alert("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù Ù„Ù„Ø·Ø¨Ø§Ø¹Ø©");
    const printWindow = window.open(`/pdfs/${currentPdfFile}`, "_blank");
    if (printWindow) {
        printWindow.addEventListener("load", () => {
            printWindow.print();
        });
    }
}

// âœ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª
function loadPolicies(role) {
    const container = document.getElementById("policiesContainer");
    container.innerHTML = "";

    const policies = role === "student" ? studentPolicies : staffPolicies;

    policies.forEach(item => {
        const div = document.createElement("div");
        div.className = "policy-item";

        const title = document.createElement("div");
        title.className = "policy-title";
        title.textContent = item.title;

        const btns = document.createElement("div");
        btns.className = "policy-buttons";

        const btnView = document.createElement("button");
        btnView.className = "btn-view";
        btnView.innerHTML = "ğŸ‘ Ø¹Ø±Ø¶";
        btnView.onclick = () => openPdfPolicy(item.filename);

        const btnDownload = document.createElement("a");
        btnDownload.className = "btn-download";
        btnDownload.href = `/pdfs/${item.filename}`;
        btnDownload.download = item.filename;
        btnDownload.innerHTML = "â¬‡ ØªØ­Ù…ÙŠÙ„";

        const btnPrint = document.createElement("button");
        btnPrint.className = "btn-print";
        btnPrint.innerHTML = "ğŸ–¨ Ø·Ø¨Ø§Ø¹Ø©";
        btnPrint.onclick = () => { currentPdfFile = item.filename; printPdfDirect(); };

        btns.appendChild(btnView);
        btns.appendChild(btnDownload);
        btns.appendChild(btnPrint);

        div.appendChild(title);
        div.appendChild(btns);
        container.appendChild(div);
    });
}

document.addEventListener("DOMContentLoaded", () => {
    const role = new URLSearchParams(window.location.search).get("role") || sessionStorage.getItem("role");
    if (role) loadPolicies(role);

    document.getElementById("btnGlobalPrint").onclick = printPdfDirect;
});
</script>
</body>
</html>
